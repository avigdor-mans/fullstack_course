(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{59:function(e,t,n){e.exports=n(88)},88:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),u=n.n(c),l=n(7),o=n(5),i=n.n(o),s=n(6),m=n(15),p=n(13),f=n(8),d=n(20),b=n(19),v=n.n(b),E=null,g={getAll:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,v.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/api/blogs","/").concat(t.id),Object(d.a)(Object(d.a)({},t),{},{user:t.user.id}));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){E="bearer ".concat(e)},remove:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,v.a.delete("".concat("/api/blogs","/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=null,y=function(e,t){return function(n){h&&clearTimeout(h),n({type:"disply",message:e,color:t}),h=setTimeout((function(){n(O())}),5e3)}},O=function(){return function(e){e({type:"remove",message:"",color:"white"})}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"disply":case"remove":return t;default:return e}},w=function(e){return e.sort((function(e,t){return t.likes-e.likes}))},k=function(e){return function(){var t=Object(s.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.create(e);case 2:a=t.sent,n(y("a new blog ".concat(a.title," by ").concat(a.author," added"),"green")),n({type:"ADD",data:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.remove(e.id);case 2:n(y("The blog ".concat(e.title," have been deleted"),"green")),n({type:"DELETE",data:e.id});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(s.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.update(e);case 2:a=t.sent,n(y("now ".concat(a.title," have ").concat(a.likes," likes!"),"green")),n({type:"UPDATE",data:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITBLOGS":return w(t.data);case"ADD":return w(e.concat(t.data));case"DELETE":return w(e.filter((function(e){return e.id!==t.data})));case"UPDATE":return w(e.map((function(e){return e.id===t.data.id?t.data:e})));default:return e}},T={getAll:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},C=n(96),I=n(91),B={login:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(e){var t=e.username,n=e.password;return function(){var e=Object(s.a)(i.a.mark((function e(a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.login({username:t,password:n});case 2:r=e.sent,window.localStorage.setItem("loggedBlogsappUser",JSON.stringify(r)),a(y("Welcome ".concat(r.name),"green")),a({type:"LOGIN",data:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return g.setToken(t.data.token),t.data;case"LOGOUT":return t.data;default:return e}},A=function(){var e=Object(l.c)((function(e){return e.message})),t={color:e.color,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return"remove"===e.type?null:r.a.createElement("p",{style:t},e.message)},N=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),o=Object(m.a)(u,2),p=o[0],f=o[1],d=Object(l.b)(),b=(Object(l.c)((function(e){return e.user})),function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{d(D({username:n,password:p})),c(""),f("")}catch(a){d(y(a.response,"red"))}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Log in to application"),r.a.createElement(A,null),r.a.createElement(C.a,{onSubmit:b},r.a.createElement(C.a.Group,{controlId:"formBasicName"},r.a.createElement(C.a.Label,null,"Username"),r.a.createElement(C.a.Control,{type:"text",placeholder:"Enter username",value:n,onChange:function(e){var t=e.target;return c(t.value)}})),r.a.createElement(C.a.Group,{controlId:"formBasicPassword"},r.a.createElement(C.a.Label,null,"Password"),r.a.createElement(C.a.Control,{type:"password",placeholder:"Enter password",value:p,onChange:function(e){var t=e.target;return f(t.value)}})),r.a.createElement(I.a,{variant:"primary",type:"submit"},"Submit")))},U=function(e){var t=e.blog;return r.a.createElement("div",null,r.a.createElement(p.b,{style:{color:"black"},to:"/blogs/".concat(t.id)}," ","".concat(t.title," By ").concat(t.author)," "),r.a.createElement("br",null))},R=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),c=Object(m.a)(n,2),u=c[0],l=c[1],o={display:u?"none":""},i={display:u?"":"none"},s=function(){l(!u)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement(I.a,{variant:"success",onClick:s},e.buttonLabel)),r.a.createElement("div",{style:i},e.children,r.a.createElement(I.a,{variant:"warning",onClick:s},"cancel")))}));R.displayName="Togglable";var z=R,P=r.a.forwardRef((function(e,t){var n=Object(a.useState)(""),c=Object(m.a)(n,2),u=c[0],o=c[1],p=Object(a.useState)(""),f=Object(m.a)(p,2),d=f[0],b=f[1],v=Object(a.useState)(""),E=Object(m.a)(v,2),g=E[0],h=E[1],O=Object(l.b)(),j=function(){var e=Object(s.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.current.toggleVisibility(),n={title:u,author:d,url:g};try{O(k(n)),o(""),b(""),h("")}catch(a){O(y(a.response.data.error,"red"))}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(C.a,{onSubmit:j},r.a.createElement("h3",null,"create new blog"),r.a.createElement(C.a.Group,null,r.a.createElement(C.a.Label,null,"title"),r.a.createElement(C.a.Control,{type:"text",value:u,onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement(C.a.Group,null,r.a.createElement(C.a.Label,null,"author"),r.a.createElement(C.a.Control,{type:"text",value:d,onChange:function(e){var t=e.target;return b(t.value)}})),r.a.createElement(C.a.Group,null,r.a.createElement(C.a.Label,null,"url"),r.a.createElement(C.a.Control,{type:"text",value:g,onChange:function(e){var t=e.target;return h(t.value)}})),r.a.createElement(I.a,{variant:"primary",type:"submit"},"Submit"))})),J=n(99),W=r.a.forwardRef((function(e,t){var n=Object(l.c)((function(e){return e.blogs}));return r.a.createElement("div",null,r.a.createElement("h1",null,"blogs"),r.a.createElement(z,{buttonLabel:"new blog",ref:t},r.a.createElement(P,{ref:t})," ",r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement(J.a,{variant:"flush"},n.map((function(e){return r.a.createElement(J.a.Item,{variant:"light"},r.a.createElement(U,{key:e.id,blog:e}))}))))})),H=n(97),V=n(94),M=n(54),q=n(92),F=n(93),K=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],u=Object(f.g)().id,o=Object(f.f)(),b=Object(l.b)(),v=Object(l.c)((function(e){return e.blogs.find((function(e){return e.id===u}))}));Object(a.useEffect)((function(){v||o.push("/")}),[v,o]);var E=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{b(S(Object(d.a)(Object(d.a)({},v),{},{likes:v.likes+1})))}catch(t){b(y(t.response,"red"))}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Remove blog ".concat(v.title," by ").concat(v.author,"?")))try{b(x(v)),o.push("/blogs")}catch(t){b(y(t.response.data.error,"red"))}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},className:"blog"},r.a.createElement(p.b,{to:"/blogs"}," ",r.a.createElement(q.a,{color:"royalblue",size:40})," "),r.a.createElement("br",null),r.a.createElement("h2",null,v.title),r.a.createElement("h3",null,"By ",v.author),r.a.createElement("br",null),r.a.createElement("p",null,v.url,"likes: ",v.likes," ",r.a.createElement(I.a,{id:"like",onClick:E},r.a.createElement(F.a,{size:20})),r.a.createElement("br",null),"added by ",v.user.name),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement(H.a.Header,{as:"h3"},"comments"),r.a.createElement(H.a.Body,null,r.a.createElement(J.a,null,v.comments.map((function(e){return r.a.createElement(J.a.Item,null,e)}))))),r.a.createElement("br",null),r.a.createElement(V.a,null,r.a.createElement(M.a,{type:"text",placeholder:"add your comment",value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement(I.a,{variant:"primary",onClick:function(e){e.preventDefault();try{b(function(e,t){return function(){var n=Object(s.a)(i.a.mark((function n(a){var r,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Object(d.a)(Object(d.a)({},t),{},{comments:t.comments.concat(e)}),n.next=3,g.update(r);case 3:c=n.sent,a(y("the comment: ".concat(e," is added to the blog ").concat(c.title))),a({type:"UPDATE",data:c});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(n,v)),c("")}catch(t){b(y(t.response,"red"))}}},"Submit"))),r.a.createElement("br",null),r.a.createElement(I.a,{variant:"danger",onClick:h},"delete"))},Q=n(95),X=n(98),Y=function(){var e=Object(l.c)((function(e){return e.user})),t=Object(l.b)(),n=Object(f.f)();return null!==e?r.a.createElement("em",null,"logged-in ",e.name," ",r.a.createElement(I.a,{variant:"dark",onClick:function(){t((function(e){window.localStorage.removeItem("loggedBlogsappUser"),e({type:"LOGOUT",data:null})})),t(y("goodbye ".concat(e.name),"green")),n.push("/")}},"logout")):null},Z=function(){return r.a.createElement(Q.a,{bg:"primary",variant:"dark"},r.a.createElement(X.a,null,r.a.createElement(Q.a.Brand,{as:p.b,to:"/"},"blogs"),r.a.createElement(Q.a.Brand,{as:p.b,to:"/users"},"users")),r.a.createElement(X.a,null,r.a.createElement(Q.a.Text,null,r.a.createElement(Y,null))))},$=function(e){var t=e.users;return r.a.createElement("div",null,r.a.createElement("h1",null,"users"),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"users"),r.a.createElement("th",null,"blogs created")),t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("th",null,r.a.createElement(p.b,{to:"/users/".concat(e.id)},e.name)),r.a.createElement("th",null,e.blogs.length))}))))},_=function(e){var t=e.users,n=Object(f.g)().id,a=t.find((function(e){return e.id===n}));return r.a.createElement("div",null,r.a.createElement("h2",null,a.name),r.a.createElement("h3",null,"added blogs"),r.a.createElement("ul",null,a.blogs.map((function(e){return r.a.createElement("li",{key:e.id},e.title)}))),r.a.createElement(p.b,{to:"/users"},"go back"))},ee=function(){var e=Object(a.useRef)(),t=Object(l.b)(),n=Object(l.c)((function(e){return e.user})),c=Object(l.c)((function(e){return e.blogs})),u=Object(a.useState)(null),o=Object(m.a)(u,2),d=o[0],b=o[1];Object(a.useEffect)((function(){t(function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getAll();case 2:n=e.sent,t({type:"INITBLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogsappUser");e&&t({type:"LOGIN",data:JSON.parse(e)})}),[t]),Object(a.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getAll();case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]);return null===n?r.a.createElement(N,null):r.a.createElement(p.a,null,r.a.createElement(Z,null),r.a.createElement(A,null),r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/users/:id"},r.a.createElement(_,{users:d})),r.a.createElement(f.a,{path:"/users"},r.a.createElement($,{users:d})),r.a.createElement(f.a,{path:"/blogs/:id"},r.a.createElement(K,null)),r.a.createElement(f.a,{path:"/"},r.a.createElement("div",null,r.a.createElement(W,{ref:e})))))},te=n(24),ne=n(57),ae=n(58),re=Object(te.combineReducers)({message:j,blogs:L,user:G}),ce=Object(te.createStore)(re,Object(ae.composeWithDevTools)(Object(te.applyMiddleware)(ne.a)));u.a.render(r.a.createElement(l.a,{store:ce},r.a.createElement(ee,null)),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.d6a83e96.chunk.js.map